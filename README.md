## Запуск приложения

### 1. Клонируйте репозиторийи перейдите в директорию приложения

```bash
git clone https://github.com/phoenix0597/imei_checker.git
cd imei_checker
```

### 2. Создайте файл .env по примеру .env.example и заполните его корректными данными, где:

* POSTGRES_USER - имя пользователя БД
* POSTGRES_PASSWORD - пароль пользователя БД
* POSTGRES_DB - имя базы данных
* DATABASE_URL - строка подключения к базе данных
* BOT_TOKEN - токен телеграм-бота
* IMEI_CHECK_API_KEY_SANDBOX - токен для проверки IMEI с помощью сервиса imeicheck.net в режиме SANDBOX
* IMEI_CHECK_API_KEY_LIVE - токен для проверки IMEI с помощью сервиса imeicheck.net в режиме LIVE

### 3. Запустите приложение с помощью команды

```bash
docker-compose up -d
```

Эта команда запустит все сервисы приложения в фоновом режиме, а именно:

- База данных PostgreSQL
- Приложение FastAPI
- Телеграм-бот

и применит миграции БД (создаст таблицу users).

### 4. Проверьте, что приложение запущено и доступно по адресу http://<host_ip>>:8000/docs

где <host_ip> - IP-адрес хоста удаленного сервера (для локальной работы можно использовать <host_ip>=localhost).

### 5. Заполните базу данных, внеся в нее Telegram ID пользователей, входящи в белый список. Для этого выполните команду:

```bash
# Войдите в контейнер БД и подключитесь к ней
docker compose exec db psql -U <POSTGRES_USER> -d <POSTGRES_DB>

# Выполните запрос на вставку данных
INSERT INTO users (tg_id) VALUES (123456789, 987654321);
```

где <POSTGRES_USER> и <POSTGRES_DB> - соответствующие значения из файла .env.
а 123456789, 987654321 - Telegram ID пользователей, которых необходимо включить в белый список.

### 6. С помощью @BotFather создайте бота и проверьте его работу, вводя команду /start.

Если бот работает, то, в зависимости от того - внесен ли ваш Telegram ID в белый список, вы получите сообщение с
текстом:

```text
Извините, вы не имеете доступа к этому боту.
Пожалуйста, обратитесь к администратору.
```

или

```text
Добро пожаловать в IMEI Checker Bot!
Введите IMEI для проверки.
```